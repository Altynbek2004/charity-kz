<template>
    <div class="bg-gray-100 py-10">
        <div class="max-w-5xl mx-auto bg-white rounded-lg shadow-md flex">
            <!-- Sidebar -->
            <aside class="w-1/4 bg-green-900 text-white p-6 rounded-l-lg">
                <h2 class="text-xl font-bold mb-4">–ú”ô–∑—ñ—Ä</h2>
                <ul class="space-y-4">
                    <li><button class="w-full text-left hover:text-green-300">–ú–µ–Ω—ñ“£ –ø—Ä–æ—Ñ–∏–ª—ñ–º</button></li>
                    <li><button class="w-full text-left hover:text-green-300">–ú–µ–Ω—ñ“£ –∂–µ—Ç—ñ—Å—Ç—ñ–∫—Ç–µ—Ä—ñ–º</button></li>
                    <li><button class="w-full text-left hover:text-green-300">“ö–∞–π—ã—Ä—ã–º–¥—ã–ª—ã“õ —Ç–∞—Ä–∏—Ö—ã</button></li>
                    <li><button class="w-full text-left hover:text-green-300">–ú–µ–Ω—ñ“£ –∂–∞–∑—ã–ª–º–∞–ª–∞—Ä—ã–º</button></li>
                    <li><button class="w-full text-left hover:text-green-300">–ú–µ–Ω—ñ“£ –∫–∞—Ä—Ç–∞–ª–∞—Ä—ã–º</button></li>
                    <li><button @click="logout" class="w-full text-left hover:text-red-400">–ê–∫–∫–∞—É–Ω—Ç—Ç–∞–Ω —à—ã“ì—É</button></li>
                </ul>
            </aside>

            <!-- Main Content -->
            <main class="w-3/4 p-8">
                <!-- Profile photo -->
                <div class="flex items-center mb-6">
                    <div class="w-24 h-24 rounded-full bg-gray-300 flex items-center justify-center relative">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-12 w-12 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5.121 17.804A7.5 7.5 0 0112 15.75a7.5 7.5 0 016.879 2.054M15 11a3 3 0 10-6 0 3 3 0 006 0z" />
                        </svg>
                        <div class="absolute bottom-0 right-0 bg-orange-400 p-1 rounded-full">
                            üì∑
                        </div>
                    </div>
                    <div class="ml-4">
                        <h2 class="text-2xl font-bold">User Name</h2>
                        <p class="text-gray-600 mt-1">+7 705 777 77 77</p>
                    </div>
                </div>

                <!-- Email info -->
                <div class="mb-4">
                    <label class="block text-sm font-medium text-gray-700 mb-1">–°—ñ–∑ ”©–∑ email –ø–æ—à—Ç–∞“£—ã–∑–¥—ã –∫”©—Ä—Å–µ—Ç–ø–µ–≥–µ–Ω—Å—ñ–∑</label>
                    <div class="flex items-center bg-gray-100 p-2 rounded-md">
                        <input type="checkbox" class="mr-2" />
                        <span>–ñ–∞“£–∞–ª—ã“õ—Ç–∞—Ä“ì–∞ –∂–∞–∑—ã–ª—ã“£—ã–∑</span>
                    </div>
                </div>

                <!-- Donation info -->
                <div class="bg-green-800 text-white py-4 px-6 rounded-md text-lg font-semibold mb-6">
                    –°—ñ–∑–¥—ñ“£ “Ø–ª–µ—Å—ñ“£—ñ–∑: <span class="ml-2 font-bold text-white">0 ‚Ç∏</span>
                </div>

                <div v-if="successMessage" class="bg-green-100 text-green-700 p-4 rounded-lg mb-4">
                    {{ successMessage }}
                </div>

                <!-- Profile form -->
                <form @submit.prevent="submitProfile" class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700">–ï—Å—ñ–º—ñ“£—ñ–∑</label>
                        <input type="text" v-model="form.name" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2" />
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700">–¢–µ–≥—ñ“£—ñ–∑</label>
                        <input type="text" v-model="form.surname" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2" />
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700">–ñ—ã–Ω—ã—Å—ã“£—ã–∑</label>
                        <select v-model="form.gender" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2">
                            <option value="female">”ò–π–µ–ª –∞–¥–∞–º</option>
                            <option value="male">–ï—Ä –∞–¥–∞–º</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700">–¢–µ–ª–µ—Ñ–æ–Ω –Ω”©–º—ñ—Ä—ñ“£—ñ–∑</label>
                        <input type="text" v-model="form.phone" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2" />
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700">“ö–∞–ª–∞“£—ã–∑</label>
                        <select v-model="form.city" class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm p-2">
                            <option value="almaty">–ê–ª–º–∞—Ç—ã</option>
                            <option value="astana">–ê—Å—Ç–∞–Ω–∞</option>
                            <option value="shymkent">–®—ã–º–∫–µ–Ω—Ç</option>
                        </select>
                    </div>

                    <button type="submit" class="bg-green-800 text-white px-6 py-2 rounded-md hover:bg-green-700">–°–∞“õ—Ç–∞—É</button>
                </form>

                <p class="text-xs text-gray-500 mt-4">
                    ¬´–°–∞“õ—Ç–∞—É¬ª –±–∞—Ç—ã—Ä–º–∞—Å—ã–Ω –±–∞—Å—É –∞—Ä“õ—ã–ª—ã —Å—ñ–∑ –∫”©—Ä—Å–µ—Ç—ñ–ª–≥–µ–Ω –∞“õ–ø–∞—Ä–∞—Ç—Ç—ã –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞–¥–∞ –∂”ô–Ω–µ –∂–µ–∫–µ –¥–µ—Ä–µ–∫—Ç–µ—Ä—ñ“£—ñ–∑–¥—ñ ”©“£–¥–µ—É–≥–µ –∫–µ–ª—ñ—Å—ñ–º –±–µ—Ä–µ—Å—ñ–∑.
                </p>
            </main>
        </div>
    </div>
</template>

<script>

import axios from "axios";

export default {
    data()
    {
        return {
            form: {
                name: '',
                surname: '',
                gender: 'male',
                phone: '',
                city: 'almaty',
            },
            successMessage: '',
        };
    },

    methods: {

        async submitProfile(){
          try{
              const response = await axios.post('/profile', this.form);
              this.successMessage = response.data.message;
              this.form = {... this.form};
              this.form = {
                  name: '',
                  surname: '',
                  gender: 'male',
                  phone: '',
                  city: 'almaty'
              };
          }  catch (e){
                console.log(e);
          }
        },

        logout()
        {
            localStorage.removeItem('isLoggedIn');
            this.isLoggedIn = false;

            this.$router.push('/');
            alert('–°”ô—Ç—Ç—ñ —à—ã“õ—Ç—ã“£—ã–∑!');
        }
    },

};

</script>
